# 面向对象与设计模式基础

## 类三大特性

* **封装** - 将数据和操作数据的方法捆绑在一起
* **继承** - 子类可以复用父类的属性和方法  
* **多态** - 同一接口可以有多种不同的实现方式

## UML类图表示法

```
+ public    # 公有成员，任何类都可访问
# protected # 保护成员，仅子类和自身可访问  
- private   # 私有成员，仅自身可访问

variable : element_type  # 变量名:类型

func (variable : element_type) : return_type  # 方法名(参数:类型):返回类型

成员变量
------
成员函数
```

## 类间关系详解

### 继承关系（泛化）
* **表示**：空心三角形箭头，子类指向父类
* **说明**：子类继承父类的所有特征和行为

### 关联关系
* **单向关联**：A类作为B类的成员变量
  * **表示**：实心箭头指向被包含的类
  * **示例**：Student类包含Address类成员
  
* **双向关联**：两个类作为对方的成员变量
  * **表示**：实心箭头互相指向
  * **示例**：Teacher类和Student类互相引用
  
* **自关联**：类作为自己的成员变量
  * **表示**：实心箭头指向自己
  * **示例**：链表节点包含下一个节点的引用

### 聚合关系
* **表示**：空心菱形箭头指向整体类
* **特点**：整体由部分组成，但部分可以独立存在
* **生命周期**：整体类被销毁时，小类内存不会被释放
* **示例**：计算机由CPU、内存等组成，但部件可单独使用

### 组合关系
* **表示**：实心菱形箭头指向整体类  
* **特点**：整体由部分组成，部分不能独立存在
* **生命周期**：整体类被销毁时，小类内存应该被释放
* **示例**：窗口由按钮组成，窗口关闭按钮也随之销毁

### 依赖关系
* **表示**：带箭头的虚线，由依赖的一方指向被依赖的一方
* **特点**：类之间最弱的关系，临时性的使用关系
* **触发条件**：
  * 将一个类的对象作为另一个类的方法的参数
  * 在一个类的方法中将另一个类的对象作为其对象的局部变量
  * 在一个类的方法中调用另一个类的静态方法

### 关系强度排序
继承 > 组合 > 聚合 > 关联 > 依赖

## 设计模式基本原则

### 单一职责原则
* **核心思想**：一个类只负责一个功能领域中的相应职责
* **类的定义**：一组相关属性和行为的集合，而不是多组不相关功能的堆砌
* **好处**：提高类的内聚性，降低耦合度

### 开放封闭原则
* **核心思想**：对扩展开放，对修改封闭
* **具体含义**：已经封装好的类可以扩展（通过预留接口），但不可以直接修改（避免影响其他调用该类的模块）
* **实现方式**：主要通过多态机制实现功能的灵活扩展

### 依赖倒置原则
* **高层模块不应依赖底层模块**：两者都应该依赖抽象接口
* **抽象不应该依赖细节**：细节应该依赖抽象
* **具体实现**：
  * 定义一个包含虚函数的父类作为抽象接口
  * 高层模块通过抽象接口调用底层功能
  * 不同的底层实现通过继承抽象类并提供具体实现
  * 在调用不同底层模块时使用对应的子类实例

### 里氏代换原则
* **核心思想**：子类类型必须能够替换它们的父类类型
* **具体要求**：父类定义的功能子类必须完全满足
* **违反情况处理**：如果子类有不满足父类契约的内容，需要重新设计或重构

